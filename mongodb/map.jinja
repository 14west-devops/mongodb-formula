{% set mongodb = salt['grains.filter_by']({
    'default': {
      'key': '0C49F3730359A14518585931BC711F9BA15703C6',
      'keyserver': 'keyserver.ubuntu.com',
      'pkgs': [
        'mongodb-org',
      ],
      'pip_pkgs': [
        'pymongo',
      ],
      'cluster_key_file': '/etc/mongodb_key',
      'bind_ip': '127.0.0.1',
      'port': 27017,
      'enable_journal': True,
      'install_pkgrepo': true,
      'dbpath': '/var/lib/mongodb',
      'logpath': '/var/log/mongodb/mongodb.log',
    },
    'Debian': {
      'repo': 'deb http://repo.mongodb.org/apt/debian {{ grains['oscodename'] }}/mongodb-org/3.4 main',
    },
    'RedHat': {
      'gpgkey': 'https://www.mongodb.org/static/pgp/server-3.4.asc',
      'repo': 'https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.4/x86_64/',
    },
}, grain='os_family', merge=salt['pillar.get']('mongodb:overrides'), base='default') %}
